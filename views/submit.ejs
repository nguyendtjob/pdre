<script>
  function ValidateExtension() {
    var allowedFiles = [".pdf"];
    var fileUpload = document.getElementById("submit_file");
    var lblError = document.getElementById("lblError");
    var lblMessage = document.getElementById("lblMessage");
    var regex = new RegExp("([a-zA-Z0-9\s_\\.\-:])+(" + allowedFiles.join('|') + ")$");
    if (!regex.test(fileUpload.value.toLowerCase())) {
      lblError.innerHTML = "Only <b>" + allowedFiles.join(', ') + "</b> files are allowed.";
      lblMessage.innerHTML = "";
      fileUpload.value = "";
      return false;
    }else {
      lblError.innerHTML = "";
      lblMessage.innerHTML = "";
      return true;
    }

  }
</script>

<div class="container-fluid">
  <p>You've found an article about an antigenic peptide that isn't present in the database? Feel free to let us know by submitting a pdf file!</p>
  <form method="post" action="/Peptide/send" enctype="multipart/form-data">
    <span id="lblError" style="color: red;"></span>
    <span id="lblMessage">
    <% if (typeof message != 'undefined') { %>
    <% if (message == "success") { %>
    <span style="color:green">The file has been successfully submitted.</span>
    <% } else if (message == "error") { %>
    <span style="color:red">An error has occurred. Please try again later.</span>
    <% }} %>
    </span>
    <br>
    <label><b>E-mail </b><i>(required)</i></label><br/>
    <input type="text" name="email" required><br><br>
    <label><b>Comment </b><i>(optional)</i></label><br/>
    <textarea id="submit_comment" name="comment"></textarea><br><br>
    <input type="hidden" name="_csrf" value="<%= _csrf %>" />
    <input id ="submit_file" type="file" name="pdf" onchange="return ValidateExtension()" accept="application/pdf" required/><br><br>
    <input id ="submit_button" type="submit" class="btn btn-primary">
  </form>
</div>
